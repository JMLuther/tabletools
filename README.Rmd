---
output:
  md_document:
    variant: markdown_github
---

<!-- README.md is generated from README.Rmd. Please edit that file -->

```{r echo=, message=FALSE, warning=FALSE, paged.print=FALSE}
knitr::opts_chunk$set(
  collapse = TRUE,
  comment = "#>",
  fig.path = "README-")
library(dplyr)
library(ggplot2)
library(htmlTable)
library(tabletools)
```

# tabletools


## Installation

Install from Github:  devtools::install_github("JMLuther/tabletools")


The goal of tabletools is to provide functions which are helpful for generating summary html tables.
These functions are most useful in conjunction with an html table generating package::functions such as:  

  *  `htmlTable::htmlTable` [Tables with htmlTable and some alternatives](https://cran.r-project.org/web/packages/htmlTable/vignettes/tables.html)  
  *  `knitr::kable` see [Create Awesome HTML Table with knitr::kable and kableExtra](https://haozhu233.github.io/kableExtra/awesome_table_in_html.html)  
  *  `formattable` 

## `my_summary` custom summary  

This summary function is customized to my preferences, and should provide enough data to pipe into ggplot or a simple summary table.
Just provides a summary for a single continuous variable.

Table:
```{r}
mtcars %>% 
  group_by(cyl) %>% 
  my_summary(mpg) %>% 
  htmlTable::htmlTable(rnames=F, align = "c",
                       css.cell = rbind(rep("padding-left: .5em; padding-right: .5em;",times=ncol(.)),
                           matrix("padding:0 5px 0 5px;", ncol=ncol(.), nrow=nrow(.))))

```

ggplot:
```{r}
mtcars %>% 
  group_by(cyl) %>% 
  my_summary(mpg) %>% 
  ggplot(aes(factor(cyl), mpg_mean, group=cyl,
             ymin=mpg_ci_025, ymax=mpg_ci_975)) +
  geom_linerange() +
  geom_point(color="red", size=2) +
  labs(title = "Gas mileage by number of cylinders",
       x="Cylinders", 
       y="Average MPG") +
  theme_bw()
```



## Table with PCT and Fraction summary   

Using `dplyr` tools to make a summary dataframe- then converting results to an html table.
```{r example}
mtcars %>% 
  group_by(cyl) %>% 
  summarise(n = sum(!is.na(cyl)),
            pct_4gears = txt_pct_fr(gear, 4)) %>%  # shows what percentage have 4 gears (selected reference) and (with fraction)
  htmlTable::htmlTable(rnames=F, align = "c",
                       header = c("Cylinders", "n", "% with 4 gears"),
                       css.cell = rbind(rep("padding-left: .5em; padding-right: .5em;",times=ncol(.)),
                           matrix("padding:0 5px 0 5px;", ncol=ncol(.), nrow=nrow(.))))

```


# Session Info  

<button class="btn btn-primary" data-toggle="collapse" data-target="#SessionInfo"> Show/Hide </button>  
<div id="SessionInfo" class="collapse">  
```{r echo=T}
Hmisc::markupSpecs$html$session()
```
</div>
 
